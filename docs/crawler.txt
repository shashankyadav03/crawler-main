-- Hoogle documentation, generated by Haddock
-- See Hoogle, http://www.haskell.org/hoogle/


-- | Please see the README on GitHub at
--   <a>https://github.com/githubuser/demo#readme</a>
@package crawler
@version 0.1.0.0


-- | Module that performs http requests as well as parsing returned html.
module Fetch
type URL = String
type HTML = String
downloadURL :: URL -> IO String

-- | Basic method for extracting all urls of a given text (String)
parseURLs :: HTML -> [URL]
isHTML :: URL -> Bool
getHTMLpages :: HTML -> [URL]

module Types
data Entry
Entry :: String -> Bool -> Entry
[url_] :: Entry -> String
[processed_] :: Entry -> Bool
instance GHC.Show.Show Types.Entry


-- | Module containing functions that operate on the database urls.db
module Database

-- | Method to create the database urls.db It uses connectSqlite3 from
--   Database.HDBC.Sqlite3
dbConnection :: IO Connection
urlNotInDB :: Connection -> URL -> IO Bool

-- | Method to store a list of urls into the database (table url)
storeURLs :: Connection -> [URL] -> IO ()

-- | Method to display all the URLs on the database. It uses getURLs.
printURLs :: Connection -> IO ()

-- | Method to retrieve all the URLs on the database.
getURLs :: Connection -> IO [URL]

-- | Method to retrieve all the URLs on the database.
getUnprocessedURLs :: Connection -> IO [URL]

-- | Method to retrive all the URLs from the database, parse and extract
--   new links from these, and store those links on the database. This
--   method could be made more efficient by remembering which URLs have
--   already been processed, so that next time unfoldDB is called only
--   newly retrieved urls should be processed.
unfoldDB :: Connection -> IO ()

-- | Method to donwload a given list of URLs, extract new links and store
--   these on the database.
process :: Connection -> [URL] -> IO ()
instance Database.SQLite.Simple.FromRow.FromRow Types.Entry
instance Database.SQLite.Simple.ToRow.ToRow Types.Entry

module Main

-- | The main function provides five different functionalities:
--   
--   <ul>
--   <li><i><tt>create</tt></i> will create the database urls.db</li>
--   <li><i><tt>saved</tt></i> simply prints all the urls currently stored
--   on the database</li>
--   <li><i><tt>unfold</tt></i> will download and parse all pages on the
--   database, storing all found links</li>
--   <li><i><tt>show url</tt></i> will download and display the contents of
--   the given url</li>
--   <li><i><tt>crawl url</tt></i> will download a given page, parse the
--   links and store on the database</li>
--   </ul>
main :: IO ()
syntaxError :: IO ()
